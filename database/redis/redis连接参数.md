# redis连接参数



### 一、redis连接参数PoolSize与MinIdleConns的区别

**PoolSize**参数

```
PoolSize参数: 指定连接池的最大连接数。这意味着连接池最多可以创建和保持`PoolSize`个连接。当应用程序需要使用Redis时，它会从连接池中获取一个可用连接。如果连接池中没有可用连接，则会创建一个新连接。
```



**MinIdleConns**参数

```
 MinIdleConns参数: 指定连接池中应该保持空闲连接的最小数量。空闲连接是指未使用但可用于立即使用的连接。即使应用程序当前不需要使用Redis，连接池也会保留至少`MinIdleConns`个空闲连接。
```



#### 1、`PoolSize`和`MinIdleConns`参数区别：

- 目的不同
  - `PoolSize`用于控制连接池的最大容量，以确保应用程序能够处理峰值负载。
  - `MinIdleConns`用于确保连接池中始终有一组可用的空闲连接，以减少创建新连接的延迟。
- 影响不同
  - 增加`PoolSize`会导致连接池创建和维护更多连接，这可能会增加内存使用和CPU开销。
  - 增加`MinIdleConns`会导致连接池保持更多空闲连接，这也会增加内存使用，但通常不会增加CPU开销。
- 适用场景不同
  - 如果应用程序的负载可预测且稳定，则可以设置较小的`PoolSize`并使用`MinIdleConns`来确保连接可用性。
  - 如果应用程序的负载不可预测且可能出现峰值，则需要设置较大的`PoolSize`以满足峰值需求。



#### 2、设置`PoolSize`和`MinIdleConns`参数的建议：

- 首先，确定应用程序的最大连接数需求。这可以通过分析应用程序的负载模式来完成。
- 然后，将`PoolSize`设置为略高于最大连接数需求的值。这将确保连接池能够处理峰值负载。
- 最后，将`MinIdleConns`设置为连接池容量的四分之一或三分之一。

